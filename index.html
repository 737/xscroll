<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>xScroll demo</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <script src="javascripts/common.js"></script>

  </head>
  <body>
    <ul class="menu-box">
      <li class="cur">小说</li>
      <li>目录</li>
      <li>图片格子</li>
      <li>图片列表</li>
    </ul>
    <div class="scroll-box">
      <div>
        <script>include('./data/content1-1.html')</script>
      </div>
      <div>
        <div class="content"  style="width:50%;height:100%;float:left">
            <script>include('./data/content2-1.html')</script>
        </div>
        <div class="content"  style="width:50%;height:100%;float:right">
            <script>include('./data/content2-2.html')</script>
        </div>
      </div>
      <div>
        <div class="content"  style="width:50%;height:50%;float:left">
            <script>include('./data/content3-1.html')</script>
        </div>
        <div class="content"  style="width:50%;height:50%;float:right">
            <script>include('./data/content3-2.html')</script>
        </div>
        <div class="content"  style="width:50%;height:50%;float:left">
            <script>include('./data/content3-3.html')</script>
        </div>
        <div class="content"  style="width:50%;height:50%;float:right">
            <script>include('./data/content3-4.html')</script>
        </div>
      </div>
      <div>
        <div id="arclist" class="content"  style="width:30%;height:100%;float:left">
            <script>include('./data/content4-1.html')</script>
        </div>
        <div id="arcbox" class="content"  style="width:70%;height:100%;float:right">
            <script>include('./data/content4-2.html')</script>
        </div>
      </div>
    </div>
    <script src="src/xscroll.js"></script>
    <script>
      function $(cls){
          return document.querySelectorAll(cls);
      }
      var slice = Array.prototype.slice;
      var menubox = $('.menu-box')[0],
          menus = slice.call($('.menu-box li')),
          scrollbox = $('.scroll-box')[0],
          subbox = slice.call($('.scroll-box > div')),
          contents = slice.call($('.content')),
          body = document.body;
      window.onresize = function(){
          scrollbox.style.height = (window.innerHeight - menubox.offsetHeight) + 'px';
      };
      window.onresize();
      function switchTab(index){
          menus.forEach(function(li){ li.className = ''});
          menus[index].className = 'cur';
          subbox.forEach(function(li){ li.style.display = 'none'});
          subbox[index].style.display = 'block';
      }
      menus.forEach(function(v,i){
        v.addEventListener('click',function(){
            switchTab(i);
        });
      })
      switchTab(0);
      //四个大框架的滚动
      subbox.forEach(function(li){ 
        new xScroll({
          el:li
        });
      });
      contents.forEach(function(li){ 
        li.xScroll = new xScroll({
          el:li
        });
      });

      var arclist = $('#arclist')[0],
          arcbox = $('#arcbox')[0];
      arclist.addEventListener('click',function(e){
          if(e.target.nodeName === 'LI'){
              loadHtml(e.target.getAttribute('data-url'),arcbox.xScroll.getContent());
          }
      },false);
      setTimeout(function(){
        var target = $('#arclist li')[0];
        loadHtml(target.getAttribute('data-url'),arcbox.xScroll.getContent());
      },1000);
      
    </script>
  </body>
</html>